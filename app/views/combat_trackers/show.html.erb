<h1>Combat Tracker</h1>

<%= render 'layouts/flash' %>

<% @combat_tracker.combatants.each do |combatant| %>
  <%= combatant.combatable.name unless combatant.combatable.nil? %>
<% end %>

<%= form_with(model: @combat_tracker) do |form| %>

  <%= form.fields_for :combatants do |cf| %>
    <%= render 'combatant_form', f: cf unless cf.object.combatable.nil? %>
  <% end %>

  <%= form.hidden_field :round %>
  <%= form.hidden_field :turn %>

  <div id="combat-tracker-controls" class="flex-row">
    <button id="next-round" class="btn trivial">Next</button>
    <div class="flex-col align-center">
      <label>Round</label>
      <span class="round"><%= @combat_tracker.round %></span>
    </div>
    <div class="flex-col align-center">
      <label>Turn</label>
      <span class="turn"><%= @combat_tracker.turn %></span>
    </div>
    <%= form.submit "Save", class: 'trivial' %>
  </div>

  

<% end %>