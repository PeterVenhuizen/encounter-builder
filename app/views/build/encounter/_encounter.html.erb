<%
  party_xp = @eb.party.party_xp
  xp_threshold = party_xp.key?(:deadly) ? party_xp[:deadly] : 20
  perc = [@dto.adjusted_xp.to_f / xp_threshold * 100, 100].min
%>

<div id="xp-threshold">
  <!-- XP Thresholds: -->
  <% party_xp.each do |k,v| %>
    <div class="col">
      <label><%= k %></label>
      <span class="pill <%= k.to_s %>"><%= v %></span>
    </div>
  <% end %>
</div>

<div class="stats">
  <label>Difficulty</label>
  <span 
    class="large-pill <%= @dto.difficulty.to_s %>"
    style="width: <%= "#{'%.2f' % perc}" %>%"  
  >
    <%= @dto.difficulty.to_s %>
  </span>
  
  <div class="xp">
    <div class="col">
      <label>Total XP</label>
      <span><%= @dto.award_xp %></span>
    </div>

    <div class="col">
      <label>Adjusted XP</label>
      <span><%= @dto.adjusted_xp.to_i %> XP (x<%= @dto.multiplier %>)</span>
    </div>
  </div>
</div>

